# 2019 01

### Mon. 7/1

To use Azure Storage

Add a connection string

```xml
<connectionStrings>
  <add name="AzureStorage" connectionString="UseDevelopmentStorage=true" />
</connectionStrings>
```

Use IConfiguration (Microsoft.Extensions.Configuration) to retrieve the value and add a blob client

```csharp
public static IServiceContainer AddClient(this IServiceContainer container, 
    Action<BlobStorageOptions> options = null)
{
  container.Register<IAzureStorageAccount, AzureStorageAccount>((string) null, Scope.Transient, Behaviour.Keep);
  container.Register<IBlobClient, ClearBank.Azure.BlobClient.Internal.BlobClient>((string) null, Scope.Transient, Behaviour.Keep);
  container.Register<IBlobDownloader, BlobDownloader>((string) null, Scope.Transient, Behaviour.Keep);
  container.Register<IBlobUploader, BlobUploader>((string) null, Scope.Transient, Behaviour.Keep);
  if (options != null)
  {
    var instance = new BlobStorageOptions();
    options(instance);
    container.Register<BlobStorageOptions>(instance, (string) null, Scope.Transient, Behaviour.Keep);
  }
  return container;
}


```

